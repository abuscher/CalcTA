import random
import string

class LeastCommonMultiple:
    def __init__(self):
        bank = set([])

        bank.add(((14, 21), 42))
        bank.add(((14, 35), 70))
        bank.add(((14, 105), 210))
        bank.add(((14, 6), 42))
        bank.add(((14, 9), 126))
        bank.add(((14, 12), 84))
        bank.add(((14, 18), 126))
        bank.add(((14, 36), 252))
        bank.add(((14, 72), 504))
        bank.add(((14, 144), 1008))
        bank.add(((14, 27), 378))
        bank.add(((14, 8), 56))
        bank.add(((14, 16), 112))
        bank.add(((14, 64), 448))
        bank.add(((14, 5), 70))
        bank.add(((14, 25), 350))
        bank.add(((14, 65), 910))
        bank.add(((14, 104), 728))
        bank.add(((14, 78), 546))
        bank.add(((14, 91), 182))
        bank.add(((14, 34), 238))
        bank.add(((14, 221), 3094))
        bank.add(((14, 22), 154))
        bank.add(((14, 33), 462))
        bank.add(((14, 66), 462))
        bank.add(((14, 132), 924))
        bank.add(((14, 156), 1092))
        bank.add(((21, 35), 105))
        bank.add(((21, 56), 168))
        bank.add(((21, 6), 42))
        bank.add(((21, 9), 63))
        bank.add(((21, 12), 84))
        bank.add(((21, 18), 126))
        bank.add(((21, 36), 252))
        bank.add(((21, 72), 504))
        bank.add(((21, 144), 1008))
        bank.add(((21, 27), 189))
        bank.add(((21, 8), 168))
        bank.add(((21, 16), 336))
        bank.add(((21, 64), 1344))
        bank.add(((21, 5), 105))
        bank.add(((21, 25), 525))
        bank.add(((21, 65), 1365))
        bank.add(((21, 104), 2184))
        bank.add(((21, 78), 546))
        bank.add(((21, 91), 273))
        bank.add(((21, 34), 714))
        bank.add(((21, 221), 4641))
        bank.add(((21, 238), 714))
        bank.add(((21, 22), 462))
        bank.add(((21, 33), 231))
        bank.add(((21, 66), 462))
        bank.add(((21, 132), 924))
        bank.add(((21, 156), 1092))
        bank.add(((35, 42), 210))
        bank.add(((35, 56), 280))
        bank.add(((35, 6), 210))
        bank.add(((35, 9), 315))
        bank.add(((35, 12), 420))
        bank.add(((35, 18), 630))
        bank.add(((35, 36), 1260))
        bank.add(((35, 72), 2520))
        bank.add(((35, 27), 945))
        bank.add(((35, 8), 280))
        bank.add(((35, 16), 560))
        bank.add(((35, 64), 2240))
        bank.add(((35, 25), 175))
        bank.add(((35, 65), 455))
        bank.add(((35, 104), 3640))
        bank.add(((35, 78), 2730))
        bank.add(((35, 91), 455))
        bank.add(((35, 34), 1190))
        bank.add(((35, 238), 1190))
        bank.add(((35, 22), 770))
        bank.add(((35, 33), 1155))
        bank.add(((35, 66), 2310))
        bank.add(((35, 132), 4620))
        bank.add(((42, 56), 168))
        bank.add(((42, 105), 210))
        bank.add(((42, 9), 126))
        bank.add(((42, 12), 84))
        bank.add(((42, 18), 126))
        bank.add(((42, 36), 252))
        bank.add(((42, 72), 504))
        bank.add(((42, 144), 1008))
        bank.add(((42, 27), 378))
        bank.add(((42, 8), 168))
        bank.add(((42, 16), 336))
        bank.add(((42, 64), 1344))
        bank.add(((42, 5), 210))
        bank.add(((42, 25), 1050))
        bank.add(((42, 65), 2730))
        bank.add(((42, 104), 2184))
        bank.add(((42, 78), 546))
        bank.add(((42, 91), 546))
        bank.add(((42, 34), 714))
        bank.add(((42, 238), 714))
        bank.add(((42, 22), 462))
        bank.add(((42, 33), 462))
        bank.add(((42, 66), 462))
        bank.add(((42, 132), 924))
        bank.add(((42, 156), 1092))
        bank.add(((56, 105), 840))
        bank.add(((56, 6), 168))
        bank.add(((56, 9), 504))
        bank.add(((56, 12), 168))
        bank.add(((56, 18), 504))
        bank.add(((56, 36), 504))
        bank.add(((56, 72), 504))
        bank.add(((56, 144), 1008))
        bank.add(((56, 27), 1512))
        bank.add(((56, 16), 112))
        bank.add(((56, 64), 448))
        bank.add(((56, 5), 280))
        bank.add(((56, 25), 1400))
        bank.add(((56, 65), 3640))
        bank.add(((56, 104), 728))
        bank.add(((56, 78), 2184))
        bank.add(((56, 91), 728))
        bank.add(((56, 34), 952))
        bank.add(((56, 238), 952))
        bank.add(((56, 22), 616))
        bank.add(((56, 33), 1848))
        bank.add(((56, 66), 1848))
        bank.add(((56, 132), 1848))
        bank.add(((56, 156), 2184))
        bank.add(((105, 6), 210))
        bank.add(((105, 9), 315))
        bank.add(((105, 12), 420))
        bank.add(((105, 18), 630))
        bank.add(((105, 36), 1260))
        bank.add(((105, 72), 2520))
        bank.add(((105, 27), 945))
        bank.add(((105, 8), 840))
        bank.add(((105, 16), 1680))
        bank.add(((105, 25), 525))
        bank.add(((105, 65), 1365))
        bank.add(((105, 78), 2730))
        bank.add(((105, 91), 1365))
        bank.add(((105, 34), 3570))
        bank.add(((105, 238), 3570))
        bank.add(((105, 22), 2310))
        bank.add(((105, 33), 1155))
        bank.add(((105, 66), 2310))
        bank.add(((105, 132), 4620))
        bank.add(((6, 9), 18))
        bank.add(((6, 27), 54))
        bank.add(((6, 8), 24))
        bank.add(((6, 16), 48))
        bank.add(((6, 64), 192))
        bank.add(((6, 5), 30))
        bank.add(((6, 25), 150))
        bank.add(((6, 65), 390))
        bank.add(((6, 104), 312))
        bank.add(((6, 91), 546))
        bank.add(((6, 34), 102))
        bank.add(((6, 221), 1326))
        bank.add(((6, 238), 714))
        bank.add(((6, 22), 66))
        bank.add(((6, 33), 66))
        bank.add(((9, 12), 36))
        bank.add(((9, 8), 72))
        bank.add(((9, 16), 144))
        bank.add(((9, 64), 576))
        bank.add(((9, 5), 45))
        bank.add(((9, 25), 225))
        bank.add(((9, 65), 585))
        bank.add(((9, 104), 936))
        bank.add(((9, 78), 234))
        bank.add(((9, 91), 819))
        bank.add(((9, 34), 306))
        bank.add(((9, 221), 1989))
        bank.add(((9, 238), 2142))
        bank.add(((9, 22), 198))
        bank.add(((9, 33), 99))
        bank.add(((9, 66), 198))
        bank.add(((9, 132), 396))
        bank.add(((9, 156), 468))
        bank.add(((12, 18), 36))
        bank.add(((12, 27), 108))
        bank.add(((12, 8), 24))
        bank.add(((12, 16), 48))
        bank.add(((12, 64), 192))
        bank.add(((12, 5), 60))
        bank.add(((12, 25), 300))
        bank.add(((12, 65), 780))
        bank.add(((12, 104), 312))
        bank.add(((12, 78), 156))
        bank.add(((12, 91), 1092))
        bank.add(((12, 34), 204))
        bank.add(((12, 221), 2652))
        bank.add(((12, 238), 1428))
        bank.add(((12, 22), 132))
        bank.add(((12, 33), 132))
        bank.add(((12, 66), 132))
        bank.add(((18, 27), 54))
        bank.add(((18, 8), 72))
        bank.add(((18, 16), 144))
        bank.add(((18, 64), 576))
        bank.add(((18, 5), 90))
        bank.add(((18, 25), 450))
        bank.add(((18, 65), 1170))
        bank.add(((18, 104), 936))
        bank.add(((18, 78), 234))
        bank.add(((18, 91), 1638))
        bank.add(((18, 34), 306))
        bank.add(((18, 221), 3978))
        bank.add(((18, 238), 2142))
        bank.add(((18, 22), 198))
        bank.add(((18, 33), 198))
        bank.add(((18, 66), 198))
        bank.add(((18, 132), 396))
        bank.add(((18, 156), 468))
        bank.add(((36, 27), 108))
        bank.add(((36, 8), 72))
        bank.add(((36, 16), 144))
        bank.add(((36, 64), 576))
        bank.add(((36, 5), 180))
        bank.add(((36, 25), 900))
        bank.add(((36, 65), 2340))
        bank.add(((36, 104), 936))
        bank.add(((36, 78), 468))
        bank.add(((36, 91), 3276))
        bank.add(((36, 34), 612))
        bank.add(((36, 238), 4284))
        bank.add(((36, 22), 396))
        bank.add(((36, 33), 396))
        bank.add(((36, 66), 396))
        bank.add(((36, 132), 396))
        bank.add(((36, 156), 468))
        bank.add(((72, 27), 216))
        bank.add(((72, 16), 144))
        bank.add(((72, 64), 576))
        bank.add(((72, 5), 360))
        bank.add(((72, 25), 1800))
        bank.add(((72, 65), 4680))
        bank.add(((72, 104), 936))
        bank.add(((72, 78), 936))
        bank.add(((72, 34), 1224))
        bank.add(((72, 22), 792))
        bank.add(((72, 33), 792))
        bank.add(((72, 66), 792))
        bank.add(((72, 132), 792))
        bank.add(((72, 156), 936))
        bank.add(((144, 27), 432))
        bank.add(((144, 64), 576))
        bank.add(((144, 5), 720))
        bank.add(((144, 25), 3600))
        bank.add(((144, 104), 1872))
        bank.add(((144, 78), 1872))
        bank.add(((144, 34), 2448))
        bank.add(((144, 22), 1584))
        bank.add(((144, 33), 1584))
        bank.add(((144, 66), 1584))
        bank.add(((144, 132), 1584))
        bank.add(((144, 156), 1872))
        bank.add(((27, 8), 216))
        bank.add(((27, 16), 432))
        bank.add(((27, 64), 1728))
        bank.add(((27, 5), 135))
        bank.add(((27, 25), 675))
        bank.add(((27, 65), 1755))
        bank.add(((27, 104), 2808))
        bank.add(((27, 78), 702))
        bank.add(((27, 91), 2457))
        bank.add(((27, 34), 918))
        bank.add(((27, 22), 594))
        bank.add(((27, 33), 297))
        bank.add(((27, 66), 594))
        bank.add(((27, 132), 1188))
        bank.add(((27, 156), 1404))
        bank.add(((8, 5), 40))
        bank.add(((8, 25), 200))
        bank.add(((8, 65), 520))
        bank.add(((8, 78), 312))
        bank.add(((8, 91), 728))
        bank.add(((8, 34), 136))
        bank.add(((8, 221), 1768))
        bank.add(((8, 238), 952))
        bank.add(((8, 22), 88))
        bank.add(((8, 33), 264))
        bank.add(((8, 66), 264))
        bank.add(((8, 132), 264))
        bank.add(((8, 156), 312))
        bank.add(((16, 5), 80))
        bank.add(((16, 25), 400))
        bank.add(((16, 65), 1040))
        bank.add(((16, 104), 208))
        bank.add(((16, 78), 624))
        bank.add(((16, 91), 1456))
        bank.add(((16, 34), 272))
        bank.add(((16, 221), 3536))
        bank.add(((16, 238), 1904))
        bank.add(((16, 22), 176))
        bank.add(((16, 33), 528))
        bank.add(((16, 66), 528))
        bank.add(((16, 132), 528))
        bank.add(((16, 156), 624))
        bank.add(((64, 5), 320))
        bank.add(((64, 25), 1600))
        bank.add(((64, 65), 4160))
        bank.add(((64, 104), 832))
        bank.add(((64, 78), 2496))
        bank.add(((64, 34), 1088))
        bank.add(((64, 22), 704))
        bank.add(((64, 33), 2112))
        bank.add(((64, 66), 2112))
        bank.add(((64, 132), 2112))
        bank.add(((64, 156), 2496))
        bank.add(((5, 104), 520))
        bank.add(((5, 78), 390))
        bank.add(((5, 91), 455))
        bank.add(((5, 34), 170))
        bank.add(((5, 221), 1105))
        bank.add(((5, 238), 1190))
        bank.add(((5, 22), 110))
        bank.add(((5, 33), 165))
        bank.add(((5, 66), 330))
        bank.add(((5, 132), 660))
        bank.add(((5, 156), 780))
        bank.add(((25, 65), 325))
        bank.add(((25, 104), 2600))
        bank.add(((25, 78), 1950))
        bank.add(((25, 91), 2275))
        bank.add(((25, 34), 850))
        bank.add(((25, 22), 550))
        bank.add(((25, 33), 825))
        bank.add(((25, 66), 1650))
        bank.add(((25, 132), 3300))
        bank.add(((25, 156), 3900))
        bank.add(((65, 104), 520))
        bank.add(((65, 78), 390))
        bank.add(((65, 91), 455))
        bank.add(((65, 34), 2210))
        bank.add(((65, 221), 1105))
        bank.add(((65, 22), 1430))
        bank.add(((65, 33), 2145))
        bank.add(((65, 66), 4290))
        bank.add(((65, 156), 780))
        bank.add(((104, 78), 312))
        bank.add(((104, 91), 728))
        bank.add(((104, 34), 1768))
        bank.add(((104, 221), 1768))
        bank.add(((104, 22), 1144))
        bank.add(((104, 33), 3432))
        bank.add(((104, 66), 3432))
        bank.add(((104, 132), 3432))
        bank.add(((104, 156), 312))
        bank.add(((78, 91), 546))
        bank.add(((78, 34), 1326))
        bank.add(((78, 221), 1326))
        bank.add(((78, 22), 858))
        bank.add(((78, 33), 858))
        bank.add(((78, 66), 858))
        bank.add(((78, 132), 1716))
        bank.add(((91, 34), 3094))
        bank.add(((91, 221), 1547))
        bank.add(((91, 238), 3094))
        bank.add(((91, 22), 2002))
        bank.add(((91, 33), 3003))
        bank.add(((91, 156), 1092))
        bank.add(((34, 221), 442))
        bank.add(((34, 22), 374))
        bank.add(((34, 33), 1122))
        bank.add(((34, 66), 1122))
        bank.add(((34, 132), 2244))
        bank.add(((34, 156), 2652))
        bank.add(((221, 238), 3094))
        bank.add(((221, 22), 4862))
        bank.add(((221, 156), 2652))
        bank.add(((238, 22), 2618))
        bank.add(((22, 33), 66))
        bank.add(((22, 156), 1716))
        bank.add(((33, 156), 1716))
        bank.add(((66, 156), 1716))
        bank.add(((132, 156), 1716))

        pick = random.sample(bank, 1)[0]
        self.problem = "Find the least common multiple of $%d$ and $%d$." % pick[0]
        self.ans = pick[1]
        self.prefix = ''
        self.anstex = "The answer is $%d$." % pick[1]
        self.suffix = ''
        self.hint = ''


class GreatestCommonFactor:
    def __init__(self):
        bank = set([])
        bank.add(((14, 156), 2))
        bank.add(((14, 132), 2))
        bank.add(((21, 33), 3))
        bank.add(((21, 221), 1))
        bank.add(((21, 91), 7))
        bank.add(((35, 33), 1))
        bank.add(((42, 156), 6))
        bank.add(((42, 132), 6))
        bank.add(((42, 66), 6))
        bank.add(((42, 22), 2))
        bank.add(((42, 238), 14))
        bank.add(((42, 34), 2))
        bank.add(((42, 78), 6))
        bank.add(((56, 156), 4))
        bank.add(((56, 132), 4))
        bank.add(((56, 66), 2))
        bank.add(((56, 22), 2))
        bank.add(((56, 238), 14))
        bank.add(((105, 33), 3))
        bank.add(((105, 221), 1))
        bank.add(((105, 91), 7))
        bank.add(((105, 65), 5))
        bank.add(((105, 25), 5))
        bank.add(((6, 22), 2))
        bank.add(((6, 238), 2))
        bank.add(((9, 33), 3))
        bank.add(((9, 221), 1))
        bank.add(((12, 66), 6))
        bank.add(((12, 22), 2))
        bank.add(((12, 238), 2))
        bank.add(((18, 156), 6))
        bank.add(((18, 132), 6))
        bank.add(((18, 66), 6))
        bank.add(((18, 22), 2))
        bank.add(((18, 238), 2))
        bank.add(((36, 156), 12))
        bank.add(((36, 132), 12))
        bank.add(((36, 66), 6))
        bank.add(((36, 22), 2))
        bank.add(((36, 238), 2))
        bank.add(((72, 156), 12))
        bank.add(((72, 132), 12))
        bank.add(((72, 66), 6))
        bank.add(((72, 22), 2))
        bank.add(((72, 238), 2))
        bank.add(((144, 156), 12))
        bank.add(((144, 132), 12))
        bank.add(((144, 66), 6))
        bank.add(((144, 22), 2))
        bank.add(((144, 238), 2))
        bank.add(((27, 33), 3))
        bank.add(((27, 221), 1))
        bank.add(((8, 156), 4))
        bank.add(((8, 132), 4))
        bank.add(((8, 66), 2))
        bank.add(((8, 22), 2))
        bank.add(((16, 156), 4))
        bank.add(((16, 132), 4))
        bank.add(((16, 66), 2))
        bank.add(((16, 22), 2))
        bank.add(((64, 156), 4))
        bank.add(((64, 132), 4))
        bank.add(((64, 66), 2))
        bank.add(((64, 22), 2))
        bank.add(((5, 33), 1))
        bank.add(((25, 33), 1))
        bank.add(((65, 33), 1))
        bank.add(((104, 156), 52))
        bank.add(((104, 132), 4))
        bank.add(((104, 66), 2))
        bank.add(((104, 22), 2))
        bank.add(((78, 132), 6))
        bank.add(((78, 66), 6))
        bank.add(((78, 22), 2))
        bank.add(((78, 238), 2))
        bank.add(((91, 33), 1))
        bank.add(((91, 221), 13))
        bank.add(((34, 156), 2))
        bank.add(((34, 132), 2))
        bank.add(((221, 33), 1))
        bank.add(((238, 156), 2))
        bank.add(((238, 132), 2))
        bank.add(((22, 156), 2))
        bank.add(((66, 156), 6))
        bank.add(((132, 156), 12))

        pick = random.sample(bank, 1)[0]
        self.problem = "Find the greatest common factor of $%d$ and $%d$." % pick[0]
        self.ans = pick[1]
        self.prefix = ''
        self.anstex = "The answer is $%d$." % pick[1]
        self.suffix = ''
        self.hint = ''


digs = string.digits + string.letters

def int2base(x, base):
    if x < 0:
        sign = -1
    elif x == 0:
        return digs[0]
    else:
        sign = 1
    x *= sign
    digits = []
    while x:
        digits.append(digs[x % base])
        x /= base
    if sign < 0:
        digits.append('-')
    digits.reverse()
    return ''.join(digits)


class NumberBase:
    def __init__(self, to10):
        bank = set([])
        b = random.sample([2] * 4 + range(3, 10) + [16], 1)[0]
        base_10 = random.randint(1, 256)
        base_xx = int2base(base_10, b)

        if to10:
            self.problem = 'Convert $%s_{%d}$ to base $10$.' % (base_xx, b)
            self.ans = base_10
            self.anstex = "The answer is $%s_{%d}=%s_{10}$." % (base_xx, b, self.ans)
            self.suffix = '$_{10}$'
        else:
            self.problem = 'Convert $%s_{10}$ to base $%d$.' % (base_10, b)
            self.ans = base_xx
            self.anstex = "The answer is $%s_{10}=%s_{%d}$." % (base_10, self.ans, b)
            self.suffix = '$_{%d}$' % b

        self.prefix = ''
        self.hint = ''